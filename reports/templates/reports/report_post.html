<div class="report-post card bg-dark text-white mb-4">
  <div class="card-body">
    <div class="d-flex align-items-start">
      <div class="me-3">
        {% load static %}

        <article class="report-post card bg-dark text-white mb-4 shadow-sm">
          <header
            class="card-header d-flex align-items-center"
            style="background: transparent; border-bottom: 0"
          >
            <div class="me-3">
              {% if report.author_avatar_url %}
              <img
                src="{{ report.author_avatar_url }}"
                class="rounded-circle"
                alt="{{ report.author_display_name }}"
                style="width: 48px; height: 48px"
              />
              {% else %}
              <div
                class="avatar-fallback rounded-circle bg-secondary d-flex align-items-center justify-content-center"
                style="width: 48px; height: 48px"
              >
                <i class="fas fa-user text-white"></i>
              </div>
              {% endif %}
            </div>
            <div class="flex-grow-1">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <div class="small  mb-2">
                    <i class="fas fa-tag me-1 text-secondary"></i>
                    <span class="fw-bold"
                      >{{ report.get_category_display }}</span
                    >

                    <span class="mx-1">â€¢</span>

                    <i class="far fa-clock me-1 text-secondary"></i>
                    {{ report.created_at|date:"d M Y, H:i" }} WIB
                  </div>
                  <h5 class="card-title mb-0">
                    <strong>{{ report.author_display_name }}</strong>
                  </h5>
                </div>

                <div class="small text-secondary text-end ms-3">
                  <span class="badge bg-info text-dark ms-1">
                    {{ report.get_status_display }}
                  </span>
                </div>
              </div>
            </div>
          </header>

          <div class="card-body">
            <p class="lead report-description">
              {{ report.title }}
              {{ report.description|linebreaks }}
            </p>

            <section class="mt-3">
              {% if report.ai_summary %}
              <div
                class="ai-summary p-3 bg-dark border rounded"
                style="border-color: var(--border)"
              >
                <div class="small text-secondary mb-2">Ringkasan Generated</div>
                <div class="text-white">{{ report.ai_summary|linebreaks }}</div>
              </div>
              {% else %}
              <div class="text-secondary">Tidak tersedia ringkasan genereted</div>
              {% endif %}
            </section>

            <section class="mt-3">
              <h6 class="mb-2 text-uppercase small text-secondary">
                Attachments
              </h6>
              {% if report.attachment %}
              <div class="attachment-list">
                <a
                  href="{{ report.attachment.url }}"
                  target="_blank"
                  class="d-inline-block text-info text-decoration-none"
                >
                  ðŸ“Ž {{ report.attachment.name }}
                </a>
              </div>
              {% else %}
              <div class="text-secondary">No files attached.</div>
              {% endif %}
            </section>
          </div>

          <footer
            class="card-footer bg-transparent border-top-0 d-flex align-items-center justify-content-between"
          >
            <div class="d-flex gap-2 align-items-center">
              <button
                class="btn btn-sm btn-reaction"
                aria-pressed="false"
                onclick="submitReaction('{{ report.id }}','agree', this)"
                title="Agree"
              >
                <i class="fa-regular fa-thumbs-up"></i>
                <span id="count-agree-{{ report.id }}" class="ms-2"
                  >{{ report.agree_count }}</span
                >
              </button>

              <button
                class="btn btn-sm btn-reaction"
                aria-pressed="false"
                onclick="submitReaction('{{ report.id }}','support', this)"
                title="Support"
              >
                <i class="fas fa-fire"></i>
                <span id="count-support-{{ report.id }}" class="ms-2"
                  >{{ report.support_count }}</span
                >
              </button>

              <button
                class="btn btn-sm btn-reaction"
                aria-pressed="false"
                onclick="submitReaction('{{ report.id }}','sad', this)"
                title="Sad"
              >
                <i class="fas fa-face-cry"></i>
                <span id="count-sad-{{ report.id }}" class="ms-2"
                  >{{ report.sad_count }}</span
                >
              </button>

              <button
                class="btn btn-sm btn-reaction"
                aria-pressed="false"
                onclick="submitReaction('{{ report.id }}','shock', this)"
                title="Shock"
              >
                <i class="fas fa-face-surprise"></i>
                <span id="count-shock-{{ report.id }}" class="ms-2"
                  >{{ report.shock_count }}</span
                >
              </button>

              <button
                class="btn btn-sm btn-reaction"
                aria-pressed="false"
                onclick="submitReaction('{{ report.id }}','confused', this)"
                title="Confused"
              >
                <i class="fas fa-face-thinking"></i>
                <span id="count-confused-{{ report.id }}" class="ms-2"
                  >{{ report.confused_count }}</span
                >
              </button>
            </div>

            <div class="small text-secondary">
              Total:
              <span id="count-total-{{ report.id }}"
                >{{ report.total_reactions_count }}</span
              >
            </div>
          </footer>
        </article>
      </div>
    </div>
  </div>
</div>
