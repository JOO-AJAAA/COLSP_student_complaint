{% load static %}
<article class="report-post card mb-4 shadow-sm">
  
  <header class="card-header d-flex align-items-center" style="background: transparent; border-bottom: 0">
    <div class="me-3">
      {% if report.author_avatar_url %}
      <img
        src="{{ report.author_avatar_url }}"
        class="rounded-circle"
        alt="{{ report.author_display_name }}"
        style="width: 48px; height: 48px"
      />
      {% else %}
      <div
        class="avatar-fallback rounded-circle d-flex align-items-center justify-content-center"
        style="width: 48px; height: 48px; background-color: var(--hover); color: var(--text-primary);"
      >
        <i class="fas fa-user"></i>
      </div>
      {% endif %}
    </div>
    <div class="flex-grow-1">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <div class="small mb-2" style="color: var(--text-secondary)">
            <i class="fas fa-tag me-1"></i>
            <span class="fw-bold">{{ report.get_category_display }}</span>
            <span class="mx-1">â€¢</span>
            <i class="far fa-clock me-1"></i>
            {{ report.created_at|date:"d M Y, H:i" }} WIB
          </div>
          <h5 class="card-title mb-0">
            <strong>{{ report.author_display_name }}</strong>
          </h5>
        </div>

        <div class="small text-end ms-3">
          <span class="badge bg-info text-dark ms-1">
            {{ report.get_status_display }}
          </span>
        </div>
      </div>
    </div>
  </header>

<div class="card-body">
    
    <p class="lead report-description mb-3">
      <strong class="d-block mb-2">{{ report.title }}</strong>
      
      <span>{{ report.description|linebreaks }}</span>
    </p>

    <section class="mt-3">
      {% if report.ai_summary %}
      <div class="ai-summary p-3 rounded">
        <div class="small mb-2 text-uppercase fw-bold">Ringkasan generated</div>
        
        <div>{{ report.ai_summary|linebreaks }}</div>
      </div>
      {% endif %}
    </section>

    <section class="mt-3">
      {% if report.attachment %}
      <h6 class="mb-2 text-uppercase small text-secondary">Attachments</h6>
      <div class="attachment-list">
        <a href="{{ report.attachment.url }}" target="_blank" class="d-inline-block text-decoration-none" style="color: var(--accent)">
          ğŸ“ {{ report.attachment.name }}
        </a>
      </div>
      {% endif %}
    </section>
  </div>

  <footer class="card-footer border-top-0 d-flex align-items-center justify-content-between">
    <div class="d-flex gap-2 align-items-center flex-wrap">
      
      <button class="btn btn-sm btn-reaction" onclick="submitReaction('{{ report.id }}','agree', this)" title="Agree">
        <i>ğŸ‘ğŸ¼</i>
        <span id="count-agree-{{ report.id }}" class="ms-2">{{ report.agree_count }}</span>
      </button>

      <button class="btn btn-sm btn-reaction" onclick="submitReaction('{{ report.id }}','support', this)" title="Support">
        <i>ğŸ”¥</i>
        <span id="count-support-{{ report.id }}" class="ms-2">{{ report.support_count }}</span>
      </button>

      <button class="btn btn-sm btn-reaction" onclick="submitReaction('{{ report.id }}','sad', this)" title="Sad">
        <i>ğŸ˜¢</i>
        <span id="count-sad-{{ report.id }}" class="ms-2">{{ report.sad_count }}</span>
      </button>

      <button class="btn btn-sm btn-reaction" onclick="submitReaction('{{ report.id }}','shock', this)" title="Shock">
        <i>ğŸ˜²</i>
        <span id="count-shock-{{ report.id }}" class="ms-2">{{ report.shock_count }}</span>
      </button>

      <button class="btn btn-sm btn-reaction" onclick="submitReaction('{{ report.id }}','confused', this)" title="Confused">
        <i>ğŸ¤”</i>
        <span id="count-confused-{{ report.id }}" class="ms-2">{{ report.confused_count }}</span>
      </button>
    </div>
  </footer>
</article>